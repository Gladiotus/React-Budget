(this["webpackJsonpreact-budget-app"]=this["webpackJsonpreact-budget-app"]||[]).push([[0],{16:function(e,t,a){e.exports={Budget:"Budget_Budget__39u5q",TotalBudget:"Budget_TotalBudget__1PQLH",hideBudget:"Budget_hideBudget__2i1OS",positiveBudget:"Budget_positiveBudget__2Ax4K",negativeBudget:"Budget_negativeBudget__3ihMT"}},19:function(e,t,a){e.exports={BudgetInput:"BudgetInput_BudgetInput__1bXrW",BtnContainer:"BudgetInput_BtnContainer__3bNrh",Minus:"BudgetInput_Minus__1rP4T",Plus:"BudgetInput_Plus__3iEXO"}},22:function(e,t,a){e.exports={Toolbar:"Toolbar_Toolbar__2YMU0",Logo:"Toolbar_Logo__JaQ0z"}},25:function(e,t,a){e.exports={BudgetItem:"BudgetItem_BudgetItem__2wZ0R",exp:"BudgetItem_exp__GfiAJ",inc:"BudgetItem_inc__3GMJk"}},26:function(e,t,a){e.exports={FlashMsg:"FlashMsg_FlashMsg__132Uy",Success:"FlashMsg_Success__1pXav",Fail:"FlashMsg_Fail__2-c8i"}},28:function(e,t,a){},41:function(e,t,a){e.exports={Layout:"Layout_Layout__31HUN"}},42:function(e,t,a){e.exports={ListContainer:"ListContainer_ListContainer__2nobd"}},43:function(e,t,a){e.exports={BudgetList:"BudgetList_BudgetList__hcJQI"}},46:function(e,t,a){e.exports={Register:"Register_Register__1n-bT"}},47:function(e,t,a){e.exports={Login:"Login_Login__3by_u"}},48:function(e,t,a){e.exports={Home:"Home_Home__1JP9h"}},50:function(e,t,a){e.exports=a(77)},77:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(39),o=a.n(r),c=(a(28),a(3)),u=a.n(c),i=a(13),l=a(4),d=a(5),m=a(7),p=a(6),g=Object(n.createContext)(null),h=a(12),f=a(49),y=a(22),v=a.n(y),b=function(e){var t=Object(n.useContext)(g);return s.a.createElement("header",{className:v.a.Toolbar},s.a.createElement(h.b,{className:v.a.Logo,to:"/"},s.a.createElement(f.a,{size:42})),s.a.createElement("nav",null,t.userData.user?s.a.createElement(s.a.Fragment,null,s.a.createElement(h.b,{to:"/",onClick:e.logout},"Logout"),s.a.createElement(h.b,{to:"/budget"},"Budget")):s.a.createElement(s.a.Fragment,null,s.a.createElement(h.b,{to:"/Login"},"Login"),s.a.createElement(h.b,{to:"/register"},"Register"))))},x=a(41),E=a.n(x),_=a(17),B=a(16),w=a.n(B),k=a(42),j=a.n(k),O=a(25),C=a.n(O),M=function(e){var t=[C.a.BudgetItem,C.a[e.type]].join(" ");return s.a.createElement("div",{className:t,onClick:function(){return e.deleteItem(e.id,e.type,e.amount)}},s.a.createElement("h1",null,e.desc),s.a.createElement("span",null,e.amount))},S=a(43),A=a.n(S),H=function(e){var t=e.items.map((function(t,a){return s.a.createElement(M,{key:t.id,id:t.id,desc:t.desc,amount:t.amount,type:t.type,deleteItem:e.deleteItem})}));return s.a.createElement("div",{className:A.a.BudgetList},t)},I=function(e){return s.a.createElement("div",{className:j.a.ListContainer},s.a.createElement(H,{items:e.incArray,deleteItem:e.deleteItem}),s.a.createElement(H,{items:e.expArray,deleteItem:e.deleteItem}))},L=a(19),N=a.n(L),D=a(44),P=a.n(D),T=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={amount:"",desc:""},e.amountChangeHandler=function(t){e.setState({amount:t.target.value})},e.descChangeHandler=function(t){e.setState({desc:t.target.value})},e.submitHandler=function(t){if(isNaN(e.state.amount))alert("Please enter valid amount");else if(e.state.amount&&e.state.desc){var a={id:P()(),amount:e.state.amount,desc:e.state.desc,type:t};e.setState({amount:"",desc:""}),e.props.inputHandler(a)}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:N.a.BudgetInput},s.a.createElement("input",{type:"text",onChange:this.amountChangeHandler,value:this.state.amount,placeholder:"Amount..."}),s.a.createElement("input",{type:"text",onChange:this.descChangeHandler,value:this.state.desc,placeholder:"Decription..."}),s.a.createElement("div",{className:N.a.BtnContainer},s.a.createElement("button",{className:N.a.Plus,onClick:function(){return e.submitHandler("inc")}},"+"),s.a.createElement("button",{className:N.a.Minus,onClick:function(){return e.submitHandler("exp")}},"-")))}}]),a}(n.Component),F=a(14),U=a.n(F),R=a(45),J=a.n(R),W=a(26),Q=a.n(W),X=function(e){var t=e.success?"Success":"Fail",a=Q.a[t],n=[Q.a.FlashMsg,a].join(" ");return s.a.createElement(J.a,{duration:3e3,persistOnHover:!0},s.a.createElement("div",{className:n},e.msg))},z=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={totalBudget:0,incArray:[],expArray:[],displayMsg:{msg:"",display:!1,success:null}},e.componentDidMount=Object(i.a)(u.a.mark((function t(){var a,n,s,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=e.context).userData.user||!localStorage.getItem("auth-token")){t.next=7;break}return n=a.userData.user.id,t.next=5,U.a.post("/budget/get",{userID:n},{headers:{"x-auth-token":localStorage.getItem("auth-token")}});case 5:((s=t.sent).data.incArray||s.data.expArray)&&(r=s.data.incArray.reduce((function(e,t){return e+Number(t.amount)}),0)-s.data.expArray.reduce((function(e,t){return e+Number(t.amount)}),0),e.setState({incArray:s.data.incArray,expArray:s.data.expArray,totalBudget:r}));case 7:case"end":return t.stop()}}),t)}))),e.inputHandle=function(){var t=Object(i.a)(u.a.mark((function t(a){var n,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("inc"!==a.type){t.next=8;break}return(n=Object(_.a)(e.state.incArray)).push(a),s=e.state.totalBudget+Number(a.amount),t.next=6,e.setState({incArray:n,totalBudget:s});case 6:t.next=14;break;case 8:if("exp"!==a.type){t.next=14;break}return(n=Object(_.a)(e.state.expArray)).push(a),s=e.state.totalBudget-a.amount,t.next=14,e.setState({expArray:n,totalBudget:s});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteItemHandle=function(t,a,n){var s,r=Object(_.a)(e.state[a+"Array"]),o=r.findIndex((function(e){return e.id===t}));r.splice(o,1),"inc"===a?(s=e.state.totalBudget-n,e.setState({incArray:r,totalBudget:s})):"exp"===a&&(s=e.state.totalBudget+Number(n),e.setState({expArray:r,totalBudget:s}))},e.saveBudget=Object(i.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={userID:e.context.userData.user.id,incArray:Object(_.a)(e.state.incArray),expArray:Object(_.a)(e.state.expArray)},t.next=3,U.a.post("/budget/post",a,{headers:{"x-auth-token":localStorage.getItem("auth-token")}});case 3:200===t.sent.status?e.setState({displayMsg:{display:!0,msg:"Budget Saved",success:!0}}):e.setState({displayMsg:{display:!0,msg:"Error",success:!1}}),setTimeout((function(){return e.setState({displayMsg:{display:!1,msg:"",success:null}})}),3e3);case 6:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"render",value:function(){var e;return e=0===this.state.expArray.length&&0===this.state.incArray.length?w.a.hideBudget:this.state.totalBudget>=0?[w.a.TotalBudget,w.a.positiveBudget].join(" "):[w.a.TotalBudget,w.a.negativeBudget].join(" "),s.a.createElement("div",{className:w.a.Budget},s.a.createElement(T,{inputHandler:this.inputHandle}),s.a.createElement("button",{onClick:this.saveBudget},"Save Budget"),s.a.createElement(I,{deleteItem:this.deleteItemHandle,incArray:this.state.incArray,expArray:this.state.expArray,budget:this.state.totalBudget}),s.a.createElement("div",{className:e},this.state.totalBudget),this.state.displayMsg.display?s.a.createElement(X,{msg:this.state.displayMsg.msg,success:this.state.displayMsg.success}):null)}}]),a}(n.Component);z.contextType=g;var G=z,q=a(46),K=a.n(q),Y=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={name:"",password:"",confirmPassword:"",displayMsg:{display:!1,success:!1,msg:""}},e.passwordChangeHandle=function(t){e.setState({password:t.target.value})},e.confirmPasswordChangeHandle=function(t){e.setState({confirmPassword:t.target.value})},e.nameChangeHandle=function(t){e.setState({name:t.target.value})},e.displaySuccessMsg=function(t){var a=!1;"User Registered"===t&&(a=!0),e.setState({displayMsg:{display:!0,msg:t,success:a},name:"",password:"",confirmPassword:""}),setTimeout((function(){return e.setState({displayMsg:{display:!1,msg:t,success:a}})}),3e3)},e.registerHandle=function(){var t=Object(i.a)(u.a.mark((function t(a){var n,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.password!==e.state.confirmPassword){t.next=10;break}return n={name:e.state.name,password:e.state.password},e.setState({name:"",password:"",confirmPassword:""}),t.next=6,U.a.post("/users/register",n);case 6:s=t.sent,e.displaySuccessMsg(s.data.msg),t.next=11;break;case 10:e.displaySuccessMsg("Password don't match");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:K.a.Register},s.a.createElement("h1",null,"Register"),s.a.createElement("form",null,s.a.createElement("input",{type:"text",placeholder:"Name",value:this.state.name,onChange:this.nameChangeHandle}),s.a.createElement("input",{type:"password",placeholder:"Password",value:this.state.password,onChange:this.passwordChangeHandle}),s.a.createElement("input",{type:"password",placeholder:"Confirm Password",value:this.state.confirmPassword,onChange:this.confirmPasswordChangeHandle}),s.a.createElement("button",{onClick:this.registerHandle},"Register")),this.state.displayMsg.display?s.a.createElement(X,{success:this.state.displayMsg.success,msg:this.state.displayMsg.msg}):null)}}]),a}(n.Component),Z=a(47),$=a.n(Z),V=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={name:"",password:"",displayMsg:{display:!1,success:null,msg:""}},e.passwordChangeHandle=function(t){e.setState({password:t.target.value})},e.nameChangeHandle=function(t){e.setState({name:t.target.value})},e.displaySuccessMsg=function(t){"User logged in"!==t&&(e.setState({displayMsg:{display:!0,msg:t,success:!1},name:"",password:""}),setTimeout((function(){return e.setState({displayMsg:{display:!1,msg:"",success:null}})}),3e3))},e.loginHandle=function(){var t=Object(i.a)(u.a.mark((function t(a){var n,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!(n={name:e.state.name,password:e.state.password}).name||!n.password){t.next=8;break}return e.setState({name:"",password:""}),t.next=6,U.a.post("/users/login",n);case 6:"User logged in"===(s=t.sent).data.msg?(e.context.setUserData(s.data.token,s.data.user),localStorage.setItem("auth-token",s.data.token),e.props.history.push("/")):e.displaySuccessMsg(s.data.msg);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:$.a.Login},s.a.createElement("h1",null,"Login"),s.a.createElement("form",null,s.a.createElement("input",{type:"text",onChange:this.nameChangeHandle,value:this.state.name,placeholder:"Name"}),s.a.createElement("input",{type:"password",onChange:this.passwordChangeHandle,value:this.state.password,placeholder:"Password"}),s.a.createElement("button",{onClick:this.loginHandle},"Login")),this.state.displayMsg.display?s.a.createElement(X,{success:this.state.displayMsg.success,msg:this.state.displayMsg.msg}):null)}}]),a}(n.Component);V.contextType=g;var ee=V,te=a(48),ae=a.n(te),ne=function(e){var t=Object(n.useContext)(g).userData;return s.a.createElement("div",{className:ae.a.Home},t.user?[s.a.createElement("h1",{key:"head"},t.user.name,", Welcome to BudgetApp"),s.a.createElement(X,{key:"msg",success:!0,msg:"Logged in as ".concat(t.user.name)})]:s.a.createElement("h1",null,"Welcome to BudgetApp"))},se=a(20),re=a(1),oe=function(e){var t=e.component,a=Object(se.a)(e,["component"]),r=Object(n.useContext)(g).userData;return s.a.createElement(re.b,Object.assign({},a,{render:function(e){return r.user?s.a.createElement(t,e):s.a.createElement(re.a,{to:{pathname:"/",state:{from:e.location}}})}}))},ce=function(e){var t=e.component,a=Object(se.a)(e,["component"]),r=Object(n.useContext)(g).userData;return s.a.createElement(re.b,Object.assign({},a,{render:function(e){return r.user?s.a.createElement(re.a,{to:{pathname:"/budget",state:{from:e.location}}}):s.a.createElement(t,e)}}))},ue=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:E.a.Layout},s.a.createElement(re.d,null,s.a.createElement(re.b,{exact:!0,path:"/",component:ne}),s.a.createElement(ce,{exact:!0,path:"/login",component:ee}),s.a.createElement(ce,{exact:!0,path:"/register",component:Y}),s.a.createElement(oe,{exact:!0,path:"/budget",component:G})))}}]),a}(n.Component),ie=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={displayLogoutMsg:!1},e.componentDidMount=Object(i.a)(u.a.mark((function t(){var a,n,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=e.context).userData.user){t.next=12;break}if(!(n=localStorage.getItem("auth-token"))){t.next=12;break}return t.next=6,U.a.get("/users/isvalidtoken",{headers:{"x-auth-token":n}});case 6:if(!t.sent.data){t.next=12;break}return t.next=10,U.a.get("/users",{headers:{"x-auth-token":n}});case 10:s=t.sent,a.setUserData(n,s.data);case 12:case"end":return t.stop()}}),t)}))),e.logoutHandle=function(){localStorage.setItem("auth-token",""),e.context.setUserData(void 0,void 0),e.setState({displayLogoutMsg:!0})},e}return Object(d.a)(a,[{key:"render",value:function(){return s.a.createElement(h.a,null,s.a.createElement("div",{className:"App"},s.a.createElement(b,{logout:this.logoutHandle}),s.a.createElement(ue,null),this.state.displayLogoutMsg?s.a.createElement(X,{success:!0,msg:"Logged Out"}):null))}}]),a}(n.Component);ie.contextType=g;var le=ie,de=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={userData:{user:null,token:null},setUserData:function(t,a){e.setState({userData:{user:a,token:t}})}},e}return Object(d.a)(a,[{key:"render",value:function(){return s.a.createElement(g.Provider,{value:this.state},this.props.children)}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(de,null,s.a.createElement(le,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[50,1,2]]]);
//# sourceMappingURL=main.8718b9ea.chunk.js.map